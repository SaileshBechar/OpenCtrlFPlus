assumption is made implicitly because the direct simulations of developed turbulence, which were used to calibrate this model, do resolve the inertial range. However, resolving inertial scales in a galactic disk simulation is computationally challenging as it requires high spatial resolution, because turbulence is generated on scales comparable to the disk scale height, $h_{\mathrm{d}} \sim$ $100 \mathrm{pc}$, while numerical viscosity affects gas flows in AMRbased codes on scales up to $\sim 10-20$ cells (e.g., Kritsuk et al. 2011). Thus, resolving the inertial scales unaffected by numerical viscosity requires minimal cell sizes of $<5-10 \mathrm{pc}$. Therefore, our resolution is not quite within the regime in which the SGS model was calibrated. However, this problem is mitigated by the insensitivity of the SGS turbulence properties in star-forming gas to the parameterization of $\tau_{i j}$, which is the part that depends on $\Delta$ being within the inertial range. Moreover, as we discuss in Section 3.3, we expect SFE to be a weak function of $\Delta$ down to $\sim 1 \mathrm{pc}$ scale. Thus, we believe that the use of the SGS turbulence model in simulations with moderate resolution is justified.

Another technical complication relates to the adopted pressure floor that prevents artificial fragmentation of gas (Truelove et al. 1997, implemented in our simulations as described in Section 2 of Machacek et al. 2001). Namely, in regions where cold gas is supported against fragmentation, the artificial pressure set by this floor dominates the flux of the total internal energy $(e+K)$ obtained by the Riemann solver. This may result in the nonphysical behavior of internal energy. Therefore, in order to avoid this problem, we disregard the internal energy fluxes obtained by the Riemann solver and, instead, at every time step we advect $e$ and $K$ as passive scalars and then apply all nonconservative source terms. This approach is akin to the dual-energy formulation of Bryan et al. (1995) for protecting internal energy from contamination by numerical errors in highly supersonic flows.

\subsection{Star Formation}

Observational evidence of turbulence in molecular clouds motivated development of analytic models that relate star formation to the properties of self-gravitating MHD turbulence in GMCs (Krumholz \& McKee 2005; Padoan \& Nordlund 2011; Federrath \& Klessen 2012; Hennebelle \& Chabrier 2013). Generally, these models predict variation of star formation efficiency with virial parameter $\alpha_{\text {vir }}$ and both sonic and Alfvenic Mach numbers. However, they usually rely on strong assumptions about turbulence in GMCs, such as the gas density PDF being static, and the critical density for collapse, which is independent of local flow configuration. Recent direct MHD simulations of turbulent molecular clouds do confirm the strong variation of SFE with $\alpha_{\mathrm{vir}}$ but reveal a surprising insensitivity to other cloud properties (Padoan et al. 2012). Specifically, Padoan et al. (2012) find that the SFE per free-fall time of simulated GMCs can be parameterized by the following simple formula:

$$\epsilon_{\mathrm{ff}}=\epsilon_{\mathrm{w}} \exp \left(-1.6 \frac{t_{\mathrm{ff}}}{t_{\mathrm{cr}}}\right)$$

where $t_{\mathrm{ff}}=\sqrt{3 \pi / 32 G \rho}$ is a free-fall time that corresponds to initial average density $\rho$ of GMCs, $t_{\mathrm{cr}}=\Delta / 2 \sigma$ is the initial turbulent crossing time on the scale of GMCs $(\Delta)$, and $\epsilon_{\mathrm{w}}$ is a normalization coefficient that takes into account mass loss during formation of stars from protostellar objects modeled by sink particles. Note that the ratio $t_{\mathrm{ff}} / t_{\mathrm{cr}}$ relates to the virial parameter $\alpha_{\mathrm{vir}}$, which is usually defined for a uniform sphere with a radius $R$ and mass $M$ as $\alpha_{\mathrm{vir}}=5 \sigma_{1 \mathrm{D}}^{2} R / G M \approx 1.35\left(t_{\mathrm{ff}} / t_{\mathrm{cr}}\right)^{2}$ (Bertoldi \& McKee 1992). The range of $t_{\mathrm{ff}} / t_{\mathrm{cr}}$ probed by Padoan et al. (2012) covers a wide range of SFE, $\epsilon_{\mathrm{ff}} \sim 0.5 \%-50 \%$, that matches the observed variation, and the above fit holds on the scales of GMCs, a few to $100 \mathrm{pc}$. Therefore, this fit can be directly applied in galaxy formation simulations if the turbulent velocity $\sigma$ on GMC scales is known.

The fit to the numerical results given by Equation (3) agrees within a factor of $\sim 2$ with the results obtained by other authors (Clark et al. 2005; Price \& Bate 2009; Wang et al. 2010; Krumholz et al. 2012b; Federrath 2015), although such comparison requires care, as SFE is defined and measured differently in different studies.

Equation (3) indicates that SFE is exponentially sensitive to the ratio of self-gravity to turbulent pressure support. Thus, if GMCs have a range of $\alpha_{\mathrm{vir}} \propto\left(t_{\mathrm{ff}} / t_{\mathrm{cr}}\right)^{2}$ values, the formula implies a wide variation of $\epsilon_{\mathrm{ff}}$.

This variation and the relative insensitivity to thermal and Alfvenic Mach numbers can be understood as follows. At a fixed sonic Mach number $M$ increasing $t_{\mathrm{ff}} / t_{\mathrm{cr}}$ is equivalent to a decrease of the average density $\bar{\rho}$ of gas. As the critical density at which gas becomes self-gravitating in physical units is constant, the critical overdensity relative to the average density increases with decreasing $\bar{\rho}$. As a result, the SFE decreases with decreasing fraction of gas mass at overdensities above critical (e.g., Padoan \& Nordlund 2011). The dependence of SFE on sonic and Alfvenic Mach numbers is more complex because their increase results in both widening the density PDF of MHD turbulence and increasing of the critical overdensity (Padoan \& Nordlund 2011). The Padoan et al. (2012) results show that these effects roughly cancel each other and SFE becomes relatively insensitive to the actual values of these Mach numbers, at least at high $M$ explored by these authors.

In the regime of low- $M$ turbulence the contribution of thermal pressure to the support against gravity cannot be neglected. To extend the above formula to this regime, we redefine $t_{\mathrm{cr}}$ to take into account thermal pressure support (Chandrasekhar 1951):

$$t_{\mathrm{cr}}=\frac{\Delta}{2 \sqrt{\sigma^{2}+c_{\mathrm{s}}^{2}}}$$

where $c_{\mathrm{s}}$ is the sound speed.

In our simulations, we estimate $\sigma=\sqrt{2 K / \rho}$ from the SGS turbulence energy $K$ and compute SFE in each cell using Equations (3) and (4) with the cell size for the value of $\Delta$. We adopt $\epsilon_{\mathrm{w}}=0.9$, consistent with the results of Federrath et al. (2014), who showed that the mass loss due to outflows does not exceed 10\% on the scale where Padoan et al. (2012) form sink particles.

We stress that all parameterizations and parameter values in our star formation model are not tuned but taken from the results of simulations of star formation in GMCs.

\subsection{Stellar Feedback}

Formation of stars is accompanied by stellar feedback, i.e., injection of mass, momentum, and energy into surrounding gas. Recent studies (e.g., Stinson et al. 2013; Hopkins et al. 2014; 